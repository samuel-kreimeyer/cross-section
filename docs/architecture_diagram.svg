<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900">
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#333">
    Road Cross-Section Architecture
  </text>

  <!-- Interface Layer -->
  <rect x="50" y="60" width="1100" height="120" fill="#E3F2FD" stroke="#1976D2" stroke-width="2"/>
  <text x="600" y="85" text-anchor="middle" font-size="16" font-weight="bold" fill="#1976D2">
    INTERFACE LAYER (Frontends)
  </text>

  <!-- CLI -->
  <rect x="100" y="100" width="250" height="60" fill="#BBDEFB" stroke="#1976D2" stroke-width="2" rx="5"/>
  <text x="225" y="125" text-anchor="middle" font-size="14" font-weight="bold">CLI Interface</text>
  <text x="225" y="145" text-anchor="middle" font-size="11">Click/Typer based</text>

  <!-- Web API -->
  <rect x="475" y="100" width="250" height="60" fill="#BBDEFB" stroke="#1976D2" stroke-width="2" rx="5"/>
  <text x="600" y="125" text-anchor="middle" font-size="14" font-weight="bold">Web API</text>
  <text x="600" y="145" text-anchor="middle" font-size="11">FastAPI REST endpoints</text>

  <!-- VIKTOR -->
  <rect x="850" y="100" width="250" height="60" fill="#BBDEFB" stroke="#1976D2" stroke-width="2" rx="5"/>
  <text x="975" y="125" text-anchor="middle" font-size="14" font-weight="bold">VIKTOR Adapter</text>
  <text x="975" y="145" text-anchor="middle" font-size="11">Native integration</text>

  <!-- Arrow down -->
  <path d="M 600 180 L 600 210" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Application Layer -->
  <rect x="50" y="210" width="1100" height="120" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2"/>
  <text x="600" y="235" text-anchor="middle" font-size="16" font-weight="bold" fill="#7B1FA2">
    APPLICATION LAYER (Orchestration &amp; Business Logic)
  </text>

  <rect x="150" y="250" width="900" height="60" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="2" rx="5"/>
  <text x="600" y="275" text-anchor="middle" font-size="14" font-weight="bold">Section Builder</text>
  <text x="300" y="295" text-anchor="middle" font-size="11">Validation Rules</text>
  <text x="600" y="295" text-anchor="middle" font-size="11">Use Cases</text>
  <text x="900" y="295" text-anchor="middle" font-size="11">Templates</text>

  <!-- Arrow down -->
  <path d="M 600 330 L 600 360" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Domain Layer -->
  <rect x="50" y="360" width="1100" height="150" fill="#E8F5E9" stroke="#388E3C" stroke-width="2"/>
  <text x="600" y="385" text-anchor="middle" font-size="16" font-weight="bold" fill="#388E3C">
    DOMAIN LAYER (Core Business Logic)
  </text>

  <!-- Components -->
  <rect x="100" y="400" width="140" height="45" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5" rx="3"/>
  <text x="170" y="418" text-anchor="middle" font-size="12" font-weight="bold">Lanes</text>
  <text x="170" y="435" text-anchor="middle" font-size="10">Travel, Turn, Bike</text>

  <rect x="260" y="400" width="140" height="45" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5" rx="3"/>
  <text x="330" y="418" text-anchor="middle" font-size="12" font-weight="bold">Shoulders</text>
  <text x="330" y="435" text-anchor="middle" font-size="10">Paved, Unpaved</text>

  <rect x="420" y="400" width="140" height="45" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5" rx="3"/>
  <text x="490" y="418" text-anchor="middle" font-size="12" font-weight="bold">Curbs</text>
  <text x="490" y="435" text-anchor="middle" font-size="10">Vertical, Sloped</text>

  <rect x="580" y="400" width="140" height="45" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5" rx="3"/>
  <text x="650" y="418" text-anchor="middle" font-size="12" font-weight="bold">Medians</text>
  <text x="650" y="435" text-anchor="middle" font-size="10">Raised, Barrier</text>

  <rect x="740" y="400" width="140" height="45" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5" rx="3"/>
  <text x="810" y="418" text-anchor="middle" font-size="12" font-weight="bold">Slopes</text>
  <text x="810" y="435" text-anchor="middle" font-size="10">Cut, Fill</text>

  <rect x="900" y="400" width="140" height="45" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5" rx="3"/>
  <text x="970" y="418" text-anchor="middle" font-size="12" font-weight="bold">Sidewalks</text>
  <text x="970" y="435" text-anchor="middle" font-size="10">Walk, Planting</text>

  <!-- Connection Rules -->
  <rect x="150" y="460" width="900" height="35" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5" rx="3"/>
  <text x="600" y="478" text-anchor="middle" font-size="12" font-weight="bold">Connection Rules &amp; Interfaces</text>
  <text x="600" y="490" text-anchor="middle" font-size="10">Compatible types, elevation matching, connection validation</text>

  <!-- Arrow down -->
  <path d="M 600 510 L 600 540" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Geometry Layer -->
  <rect x="50" y="540" width="1100" height="120" fill="#FFF3E0" stroke="#E65100" stroke-width="2"/>
  <text x="600" y="565" text-anchor="middle" font-size="16" font-weight="bold" fill="#E65100">
    GEOMETRY LAYER (Shape Translation)
  </text>

  <rect x="150" y="580" width="250" height="60" fill="#FFE0B2" stroke="#E65100" stroke-width="1.5" rx="5"/>
  <text x="275" y="605" text-anchor="middle" font-size="12" font-weight="bold">Geometric Primitives</text>
  <text x="275" y="625" text-anchor="middle" font-size="10">Polygons, Polylines, Points</text>

  <rect x="475" y="580" width="250" height="60" fill="#FFE0B2" stroke="#E65100" stroke-width="1.5" rx="5"/>
  <text x="600" y="605" text-anchor="middle" font-size="12" font-weight="bold">Transform Engine</text>
  <text x="600" y="625" text-anchor="middle" font-size="10">Position, Offset, Assembly</text>

  <rect x="800" y="580" width="250" height="60" fill="#FFE0B2" stroke="#E65100" stroke-width="1.5" rx="5"/>
  <text x="925" y="605" text-anchor="middle" font-size="12" font-weight="bold">Shapely Integration</text>
  <text x="925" y="625" text-anchor="middle" font-size="10">Spatial operations</text>

  <!-- Arrow down -->
  <path d="M 600 660 L 600 690" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Export Layer -->
  <rect x="50" y="690" width="1100" height="120" fill="#FCE4EC" stroke="#C2185B" stroke-width="2"/>
  <text x="600" y="715" text-anchor="middle" font-size="16" font-weight="bold" fill="#C2185B">
    EXPORT LAYER (Format Output)
  </text>

  <rect x="200" y="730" width="200" height="60" fill="#F8BBD0" stroke="#C2185B" stroke-width="1.5" rx="5"/>
  <text x="300" y="755" text-anchor="middle" font-size="14" font-weight="bold">DXF Exporter</text>
  <text x="300" y="775" text-anchor="middle" font-size="11">ezdxf library</text>

  <rect x="500" y="730" width="200" height="60" fill="#F8BBD0" stroke="#C2185B" stroke-width="1.5" rx="5"/>
  <text x="600" y="755" text-anchor="middle" font-size="14" font-weight="bold">SVG Exporter</text>
  <text x="600" y="775" text-anchor="middle" font-size="11">svgwrite library</text>

  <rect x="800" y="730" width="200" height="60" fill="#F8BBD0" stroke="#C2185B" stroke-width="1.5" rx="5"/>
  <text x="900" y="755" text-anchor="middle" font-size="14" font-weight="bold">Future Formats</text>
  <text x="900" y="775" text-anchor="middle" font-size="11">PDF, GeoJSON, etc.</text>

  <!-- Key Patterns Box -->
  <rect x="50" y="830" width="550" height="60" fill="#F5F5F5" stroke="#666" stroke-width="1.5" rx="5"/>
  <text x="325" y="850" text-anchor="middle" font-size="13" font-weight="bold">Key Design Patterns</text>
  <text x="150" y="870" font-size="10">• Component Pattern</text>
  <text x="150" y="883" font-size="10">• Builder Pattern</text>
  <text x="325" y="870" font-size="10">• Strategy Pattern (Export)</text>
  <text x="325" y="883" font-size="10">• Protocol/Interface</text>
  <text x="500" y="870" font-size="10">• Factory Pattern</text>
  <text x="500" y="883" font-size="10">• Dataclass Pattern</text>

  <!-- Technology Stack Box -->
  <rect x="620" y="830" width="530" height="60" fill="#F5F5F5" stroke="#666" stroke-width="1.5" rx="5"/>
  <text x="885" y="850" text-anchor="middle" font-size="13" font-weight="bold">Technology Stack</text>
  <text x="700" y="870" font-size="10">• Python 3.11+</text>
  <text x="700" y="883" font-size="10">• Shapely (geometry)</text>
  <text x="850" y="870" font-size="10">• ezdxf, svgwrite</text>
  <text x="850" y="883" font-size="10">• FastAPI (web)</text>
  <text x="1000" y="870" font-size="10">• Click/Typer (CLI)</text>
  <text x="1000" y="883" font-size="10">• pytest (testing)</text>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>
</svg>